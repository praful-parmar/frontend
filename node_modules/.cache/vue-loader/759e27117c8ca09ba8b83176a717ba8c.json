{"remainingRequest":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/src/components/Main/NewPost.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/src/components/Main/NewPost.vue","mtime":1624537514000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgeyBDb21wb25lbnQsIFZ1ZSB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgeyBwb3N0TmV3UG9zdCB9IGZyb20gIi4uLy4uL2hlbHBlcnMvcG9zdC1nZXR0ZXIiOwppbXBvcnQgeyBQb3N0Q2xhc3MgfSBmcm9tICIuLi8uLi90eXBlcyI7CgpAQ29tcG9uZW50CmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5ld1Bvc3QgZXh0ZW5kcyBWdWUgewogIG5ld19wb3N0ID0gewogICAgY29udGVudDogIiIsCiAgICBpbWFnZV91cmw6ICIiLAogIH07CgogIGVycm9yID0gIiI7CgogIGdldCB1c2VyKCkgewogICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXI7CiAgfQoKICBjcmVhdGVQb3N0KCk6IHZvaWQgewogICAgcG9zdE5ld1Bvc3QodGhpcy5uZXdfcG9zdC5jb250ZW50LCB0aGlzLnVzZXIuaWQsIHRoaXMubmV3X3Bvc3QuaW1hZ2VfdXJsKQogICAgICAudGhlbigocG9zdCkgPT4gewogICAgICAgIHRoaXMuJGVtaXQoCiAgICAgICAgICAicG9zdC1jcmVhdGVkIiwKICAgICAgICAgIG5ldyBQb3N0Q2xhc3MoCiAgICAgICAgICAgIHBvc3QuY3JlYXRlZF9wb3N0LmlkLAogICAgICAgICAgICB0aGlzLm5ld19wb3N0LmNvbnRlbnQsCiAgICAgICAgICAgIHRoaXMudXNlci51c2VybmFtZSwKICAgICAgICAgICAgbmV3IERhdGUoRGF0ZS5ub3coKSksCiAgICAgICAgICAgIDAsCiAgICAgICAgICAgIFtdLAogICAgICAgICAgICB0aGlzLm5ld19wb3N0LmltYWdlX3VybAogICAgICAgICAgKQogICAgICAgICk7CgogICAgICAgIHRoaXMubmV3X3Bvc3QuY29udGVudCA9ICIiOwogICAgICAgIHRoaXMubmV3X3Bvc3QuaW1hZ2VfdXJsID0gIiI7CiAgICAgICAgdGhpcy5lcnJvciA9ICIiOwogICAgICB9KQogICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgIHRoaXMuZXJyb3IgPSBlcnIubWVzc2FnZTsKICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICJTb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIHlvdXIgbmV3IHBvc3TigKYgUGxlYXNlIHRyeSBhZ2Fpbi4gIgogICAgICAgICk7CiAgICAgIH0pOwogIH0KfQo="},{"version":3,"sources":["NewPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewPost.vue","sourceRoot":"src/components/Main","sourcesContent":["<template>\n  <section>\n    <form class=\"post-form\">\n      <h1 id=\"write-post-title\">Rédiger un article</h1>\n      <textarea\n        class=\"form-field new-post-field\"\n        aria-labelledby=\"write-post-title\"\n        v-model=\"new_post.content\"\n        placeholder=\"Mon article rédigé…\"\n      ></textarea>\n\n      <label for=\"post-image-url\">URL d'une image (optionnel) :</label>\n      <input\n        class=\"form-field new-post-field\"\n        id=\"post-image-url\"\n        type=\"url\"\n        placeholder=\"https://giphy.gif\"\n        v-model=\"new_post.image_url\"\n      />\n\n      <fieldset class=\"new-post-buttons\">\n        <input type=\"reset\" value=\"Annuler\" class=\"button cancel\" />\n        <button type=\"button\" v-on:click=\"createPost\" class=\"button\">\n          Publier\n        </button>\n      </fieldset>\n      <p v-if=\"error\">{{ error }}</p>\n    </form>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { postNewPost } from \"../../helpers/post-getter\";\nimport { PostClass } from \"../../types\";\n\n@Component\nexport default class NewPost extends Vue {\n  new_post = {\n    content: \"\",\n    image_url: \"\",\n  };\n\n  error = \"\";\n\n  get user() {\n    return this.$store.state.user;\n  }\n\n  createPost(): void {\n    postNewPost(this.new_post.content, this.user.id, this.new_post.image_url)\n      .then((post) => {\n        this.$emit(\n          \"post-created\",\n          new PostClass(\n            post.created_post.id,\n            this.new_post.content,\n            this.user.username,\n            new Date(Date.now()),\n            0,\n            [],\n            this.new_post.image_url\n          )\n        );\n\n        this.new_post.content = \"\";\n        this.new_post.image_url = \"\";\n        this.error = \"\";\n      })\n      .catch((err) => {\n        this.error = err.message;\n        console.log(\n          \"Something went wrong with your new post… Please try again. \"\n        );\n      });\n  }\n}\n</script>\n"]}]}