{"remainingRequest":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/src/components/Main/Post/Post.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/src/components/Main/Post/Post.vue","mtime":1624537514000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUgfSBmcm9tICJ2dWUtcHJvcGVydHktZGVjb3JhdG9yIjsKaW1wb3J0IHsgQ29tbWVudFR5cGUsIFBvc3RDbGFzcyB9IGZyb20gIi4uLy4uLy4uL3R5cGVzIjsKCmltcG9ydCBOZXdDb21tZW50IGZyb20gIi4vTmV3Q29tbWVudC52dWUiOwppbXBvcnQgQ29tbWVudHNMaXN0IGZyb20gIi4vQ29tbWVudHNMaXN0LnZ1ZSI7CmltcG9ydCB7IGRlbGV0ZVBvc3QgfSBmcm9tICIuLi8uLi8uLi9oZWxwZXJzL3Bvc3QtZ2V0dGVyIjsKCkBDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHsgTmV3Q29tbWVudCwgQ29tbWVudHNMaXN0IH0sCn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvc3QgZXh0ZW5kcyBWdWUgewogIEBQcm9wKCkgcHJpdmF0ZSBwb3N0ITogUG9zdENsYXNzOwogIEBQcm9wKCkgcHJpdmF0ZSBwb3NpdGlvbl9pbl9hcnJheSE6IG51bWJlcjsKCiAgcHJpdmF0ZSBpc19hZG1pbiA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuYWRtaW47CiAgcHJpdmF0ZSBlcnJvciA9ICIiOwogIHByaXZhdGUgaXNfaW1hZ2VfdmFsaWQgPSBmYWxzZTsKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaXNfaW1hZ2VfdmFsaWQgPSAhIXRoaXMucG9zdC5pbWFnZV91cmw7CiAgfQoKICBpbnZhbGlkYXRlSW1hZ2UoKSB7CiAgICB0aGlzLmlzX2ltYWdlX3ZhbGlkID0gZmFsc2U7CiAgfQoKICBhZGRDb21tZW50KG5ld19jb21tZW50OiBDb21tZW50VHlwZSkgewogICAgdGhpcy5wb3N0LmNvbW1lbnRzLnVuc2hpZnQobmV3X2NvbW1lbnQpOwogIH0KCiAgZXJhc2VQb3N0KCkgewogICAgZGVsZXRlUG9zdCh0aGlzLnBvc3QuaWQpCiAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRlbWl0KCJwb3N0LWRlbGV0ZWQiLCB0aGlzLnBvc2l0aW9uX2luX2FycmF5KTsKICAgICAgICB0aGlzLmVycm9yID0gIiI7CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgdGhpcy5lcnJvciA9IGVyci5tZXNzYWdlOwogICAgICB9KTsKICB9Cn0K"},{"version":3,"sources":["Post.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Post.vue","sourceRoot":"src/components/Main/Post","sourcesContent":["<template>\n  <article class=\"post\">\n    <div class=\"post-content\">\n      <header class=\"post-header\">\n        <div>\n          <p class=\"post-author\">{{ post.author }}</p>\n          <time v-bind:datetime=\"post.postdate\">{{ post.postdate }}</time>\n        </div>\n\n        <button\n          v-if=\"is_admin\"\n          v-on:click=\"erasePost\"\n          class=\"button delete-button delete-post\"\n        >\n          Supprimer l'article\n        </button>\n      </header>\n\n      <div class=\"post-image-container\">\n        <img\n          v-if=\"is_image_valid\"\n          v-bind:src=\"post.image_url\"\n          v-on:error=\"invalidateImage\"\n          alt=\"\"\n          class=\"post-image\"\n        />\n      </div>\n\n      <p class=\"text-content\">{{ post.content }}</p>\n    </div>\n\n    <p v-if=\"error\">{{ error }}</p>\n\n    <hr />\n    <NewComment v-bind:post=\"post\" v-on:new-comment-posted=\"addComment\" />\n\n    <hr v-if=\"this.post.comments.length > 0\" />\n    <CommentsList v-bind:post=\"post\" />\n  </article>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { CommentType, PostClass } from \"../../../types\";\n\nimport NewComment from \"./NewComment.vue\";\nimport CommentsList from \"./CommentsList.vue\";\nimport { deletePost } from \"../../../helpers/post-getter\";\n\n@Component({\n  components: { NewComment, CommentsList },\n})\nexport default class Post extends Vue {\n  @Prop() private post!: PostClass;\n  @Prop() private position_in_array!: number;\n\n  private is_admin = this.$store.state.user.admin;\n  private error = \"\";\n  private is_image_valid = false;\n\n  mounted() {\n    this.is_image_valid = !!this.post.image_url;\n  }\n\n  invalidateImage() {\n    this.is_image_valid = false;\n  }\n\n  addComment(new_comment: CommentType) {\n    this.post.comments.unshift(new_comment);\n  }\n\n  erasePost() {\n    deletePost(this.post.id)\n      .then(() => {\n        this.$emit(\"post-deleted\", this.position_in_array);\n        this.error = \"\";\n      })\n      .catch((err) => {\n        this.error = err.message;\n      });\n  }\n}\n</script>\n"]}]}