{"remainingRequest":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/src/components/Main/Post/NewComment.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/src/components/Main/Post/NewComment.vue","mtime":1624537514000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUsIFJlZiB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgeyBwb3N0TmV3Q29tbWVudCB9IGZyb20gIi4uLy4uLy4uL2hlbHBlcnMvY29tbWVudC1nZXR0ZXIiOwppbXBvcnQgeyBQb3N0Q2xhc3MsIENvbW1lbnRUeXBlIH0gZnJvbSAiLi4vLi4vLi4vdHlwZXMiOwoKQENvbXBvbmVudApleHBvcnQgZGVmYXVsdCBjbGFzcyBOZXdDb21tZW50IGV4dGVuZHMgVnVlIHsKICBAUHJvcCgpIHByaXZhdGUgcG9zdCE6IFBvc3RDbGFzczsKICBAUmVmKCkgcmVhZG9ubHkgbmV3Q29tbWVudFRleHRhcmVhITogSFRNTFRleHRBcmVhRWxlbWVudDsKICBAUmVmKCkgcmVhZG9ubHkgb3BlbkNvbW1lbnRGb3JtQnV0dG9uITogSFRNTEJ1dHRvbkVsZW1lbnQ7CgogIHByaXZhdGUgc2hvd19jb21tZW50X2Zvcm0gPSBmYWxzZTsKICBwcml2YXRlIGVycm9yID0gIiI7CgogIHByaXZhdGUgbmV3X2NvbW1lbnQ6IENvbW1lbnRUeXBlID0gewogICAgYXV0aG9yOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmlkLAogICAgY29udGVudDogIiIsCiAgICBwb3N0OiB0aGlzLnBvc3QuaWQsCiAgfTsKCiAgZGlzcGxheUNvbW1lbnRGb3JtKCkgewogICAgdGhpcy5zaG93X2NvbW1lbnRfZm9ybSA9IHRydWU7CiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB0aGlzLm5ld0NvbW1lbnRUZXh0YXJlYS5mb2N1cygpKTsKICB9CgogIGFkZENvbW1lbnQoKTogdm9pZCB7CiAgICBwb3N0TmV3Q29tbWVudCh0aGlzLm5ld19jb21tZW50KQogICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kZW1pdCgibmV3LWNvbW1lbnQtcG9zdGVkIiwgewogICAgICAgICAgLi4udGhpcy5uZXdfY29tbWVudCwKICAgICAgICAgIGF1dGhvcjogdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VybmFtZSwKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNsb3NlKCk7CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgdGhpcy5lcnJvciA9IGVyci5tZXNzYWdlOwogICAgICB9KTsKICB9CgogIGNsb3NlKCkgewogICAgdGhpcy5uZXdfY29tbWVudC5jb250ZW50ID0gIiI7CiAgICB0aGlzLmVycm9yID0gIiI7CiAgICB0aGlzLnNob3dfY29tbWVudF9mb3JtID0gZmFsc2U7CiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB0aGlzLm9wZW5Db21tZW50Rm9ybUJ1dHRvbi5mb2N1cygpKTsKICB9Cn0K"},{"version":3,"sources":["NewComment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewComment.vue","sourceRoot":"src/components/Main/Post","sourcesContent":["<template>\n  <form class=\"comment-form\">\n    <button\n      v-if=\"!show_comment_form\"\n      v-on:click=\"displayCommentForm\"\n      class=\"button show-comment-form\"\n      ref=\"openCommentFormButton\"\n    >\n      Ajouter un commentaire\n    </button>\n\n    <div v-if=\"show_comment_form\" class=\"comment-form-fields\">\n      <textarea\n        class=\"form-field new-comment-field\"\n        aria-label=\"Entrez un commentaire\"\n        v-model=\"new_comment.content\"\n        ref=\"newCommentTextarea\"\n      ></textarea>\n      <fieldset class=\"new-comment-buttons\">\n        <input\n          type=\"reset\"\n          value=\"Annuler\"\n          v-on:click=\"close\"\n          class=\"button cancel\"\n        />\n        <button v-on:click=\"addComment\" type=\"button\" class=\"button\">\n          Commenter\n        </button>\n      </fieldset>\n    </div>\n\n    <p v-if=\"error\">{{ error }}</p>\n  </form>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue, Ref } from \"vue-property-decorator\";\nimport { postNewComment } from \"../../../helpers/comment-getter\";\nimport { PostClass, CommentType } from \"../../../types\";\n\n@Component\nexport default class NewComment extends Vue {\n  @Prop() private post!: PostClass;\n  @Ref() readonly newCommentTextarea!: HTMLTextAreaElement;\n  @Ref() readonly openCommentFormButton!: HTMLButtonElement;\n\n  private show_comment_form = false;\n  private error = \"\";\n\n  private new_comment: CommentType = {\n    author: this.$store.state.user.id,\n    content: \"\",\n    post: this.post.id,\n  };\n\n  displayCommentForm() {\n    this.show_comment_form = true;\n    this.$nextTick(() => this.newCommentTextarea.focus());\n  }\n\n  addComment(): void {\n    postNewComment(this.new_comment)\n      .then(() => {\n        this.$emit(\"new-comment-posted\", {\n          ...this.new_comment,\n          author: this.$store.state.user.username,\n        });\n        this.close();\n      })\n      .catch((err) => {\n        this.error = err.message;\n      });\n  }\n\n  close() {\n    this.new_comment.content = \"\";\n    this.error = \"\";\n    this.show_comment_form = false;\n    this.$nextTick(() => this.openCommentFormButton.focus());\n  }\n}\n</script>\n"]}]}