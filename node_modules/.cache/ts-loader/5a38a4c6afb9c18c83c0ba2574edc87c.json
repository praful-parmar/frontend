{"remainingRequest":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/thread-loader/dist/cjs.js!/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/babel-loader/lib/index.js!/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/ts-loader/index.js??ref--13-3!/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/src/router/index.ts","dependencies":[{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/src/router/index.ts","mtime":1624537514000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgVnVlUm91dGVyIGZyb20gInZ1ZS1yb3V0ZXIiOwppbXBvcnQgTWFpbiBmcm9tICIuLi92aWV3cy9NYWluLnZ1ZSI7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAiLi4vaGVscGVycy90b2tlbi1nZXR0ZXIiOwppbXBvcnQgeyBhdXRoZW50aWNhdGVVc2VyIH0gZnJvbSAiLi4vaGVscGVycy91c2VyLWdldHRlciI7CmltcG9ydCBzdG9yZSBmcm9tICIuLi9zdG9yZSI7CmltcG9ydCB7IGNsZWFyU2Vzc2lvbiB9IGZyb20gIi4uL2hlbHBlcnMvY2xlYXItc2Vzc2lvbiI7ClZ1ZS51c2UoVnVlUm91dGVyKTsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogIi8iLAogIG5hbWU6ICJNYWluIiwKICBjb21wb25lbnQ6IE1haW4KfSwgewogIHBhdGg6ICIvYWNjb3VudCIsCiAgbmFtZTogIkFjY291bnQiLAogIC8vIHJvdXRlIGxldmVsIGNvZGUtc3BsaXR0aW5nCiAgLy8gdGhpcyBnZW5lcmF0ZXMgYSBzZXBhcmF0ZSBjaHVuayAoYWJvdXQuW2hhc2hdLmpzKSBmb3IgdGhpcyByb3V0ZQogIC8vIHdoaWNoIGlzIGxhenktbG9hZGVkIHdoZW4gdGhlIHJvdXRlIGlzIHZpc2l0ZWQuCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KAogICAgLyogd2VicGFja0NodW5rTmFtZTogImFjY291bnQiICovCiAgICAiLi4vdmlld3MvQWNjb3VudC52dWUiKTsKICB9Cn0sIHsKICBwYXRoOiAiL2xvZ2luIiwKICBuYW1lOiAiTG9naW4iLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgKICAgIC8qIHdlYnBhY2tDaHVua05hbWU6ICJsb2dpbiIgKi8KICAgICIuLi92aWV3cy9Mb2dpbi52dWUiKTsKICB9Cn0sIHsKICBwYXRoOiAiL3JlZ2lzdGVyIiwKICBuYW1lOiAiUmVnaXN0ZXIiLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgKICAgIC8qIHdlYnBhY2tDaHVua05hbWU6ICJyZWdpc3RlciIgKi8KICAgICIuLi92aWV3cy9SZWdpc3Rlci52dWUiKTsKICB9Cn0sIHsKICBwYXRoOiAiKiIsCiAgcmVkaXJlY3Q6IHsKICAgIG5hbWU6ICJNYWluIgogIH0KfV07CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICBtb2RlOiAiaGFzaCIsCiAgYmFzZTogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgcm91dGVzOiByb3V0ZXMKfSk7CnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIGlmICghZ2V0VG9rZW4oKSkgewogICAgY2xlYXJTZXNzaW9uKCk7CgogICAgaWYgKHRvLm5hbWUgIT09ICJMb2dpbiIgJiYgdG8ubmFtZSAhPT0gIlJlZ2lzdGVyIikgewogICAgICBuZXh0KHsKICAgICAgICBuYW1lOiAiTG9naW4iCiAgICAgIH0pOwogICAgfQoKICAgIG5leHQoKTsKICAgIHJldHVybjsKICB9CgogIGF1dGhlbnRpY2F0ZVVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICBzdG9yZS5kaXNwYXRjaCgic2V0VXNlciIsIHVzZXIpOwoKICAgIGlmICh0by5uYW1lID09PSAiTG9naW4iIHx8IHRvLm5hbWUgPT09ICJSZWdpc3RlciIpIHsKICAgICAgbmV4dCh7CiAgICAgICAgbmFtZTogIk1haW4iCiAgICAgIH0pOwogICAgfQoKICAgIG5leHQoKTsKICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICBjbGVhclNlc3Npb24oKTsKCiAgICBpZiAodG8ubmFtZSAhPT0gIkxvZ2luIiAmJiB0by5uYW1lICE9PSAiUmVnaXN0ZXIiKSB7CiAgICAgIG5leHQoewogICAgICAgIG5hbWU6ICJMb2dpbiIKICAgICAgfSk7CiAgICB9CiAgfSk7Cn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["/home/praful/aappp/OC_7-Build_a_Full-Stack_solution-main/frontend/src/router/index.ts"],"names":[],"mappings":";;;;AAAA,OAAO,GAAP,MAAgB,KAAhB;AACA,OAAO,SAAP,MAAuC,YAAvC;AACA,OAAO,IAAP,MAAiB,mBAAjB;AACA,SAAS,QAAT,QAAyB,yBAAzB;AACA,SAAS,gBAAT,QAAiC,wBAAjC;AACA,OAAO,KAAP,MAAkB,UAAlB;AACA,SAAS,YAAT,QAA6B,0BAA7B;AAEA,GAAG,CAAC,GAAJ,CAAQ,SAAR;AAEA,IAAM,MAAM,GAAuB,CACjC;AACE,EAAA,IAAI,EAAE,GADR;AAEE,EAAA,IAAI,EAAE,MAFR;AAGE,EAAA,SAAS,EAAE;AAHb,CADiC,EAMjC;AACE,EAAA,IAAI,EAAE,UADR;AAEE,EAAA,IAAI,EAAE,SAFR;AAGE;AACA;AACA;AACA,EAAA,SAAS,EAAE;AAAA,WACT;AAAO;AAAkC,0BAAzC,CADS;AAAA;AANb,CANiC,EAejC;AACE,EAAA,IAAI,EAAE,QADR;AAEE,EAAA,IAAI,EAAE,OAFR;AAGE,EAAA,SAAS,EAAE;AAAA,WACT;AAAO;AAAgC,wBAAvC,CADS;AAAA;AAHb,CAfiC,EAqBjC;AACE,EAAA,IAAI,EAAE,WADR;AAEE,EAAA,IAAI,EAAE,UAFR;AAGE,EAAA,SAAS,EAAE;AAAA,WACT;AAAO;AAAmC,2BAA1C,CADS;AAAA;AAHb,CArBiC,EA2BjC;AACE,EAAA,IAAI,EAAE,GADR;AAEE,EAAA,QAAQ,EAAE;AAAE,IAAA,IAAI,EAAE;AAAR;AAFZ,CA3BiC,CAAnC;AAiCA,IAAM,MAAM,GAAG,IAAI,SAAJ,CAAc;AAC3B,EAAA,IAAI,EAAE,MADqB;AAE3B,EAAA,IAAI,EAAE,OAAO,CAAC,GAAR,CAAY,QAFS;AAG3B,EAAA,MAAM,EAAN;AAH2B,CAAd,CAAf;AAMA,MAAM,CAAC,UAAP,CAAkB,UAAC,EAAD,EAAK,IAAL,EAAW,IAAX,EAAmB;AACnC,MAAI,CAAC,QAAQ,EAAb,EAAiB;AACf,IAAA,YAAY;;AACZ,QAAI,EAAE,CAAC,IAAH,KAAY,OAAZ,IAAuB,EAAE,CAAC,IAAH,KAAY,UAAvC,EAAmD;AACjD,MAAA,IAAI,CAAC;AAAE,QAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACD;;AACD,IAAA,IAAI;AACJ;AACD;;AAED,EAAA,gBAAgB,GACb,IADH,CACQ,UAAC,IAAD,EAAS;AACb,IAAA,KAAK,CAAC,QAAN,CAAe,SAAf,EAA0B,IAA1B;;AACA,QAAI,EAAE,CAAC,IAAH,KAAY,OAAZ,IAAuB,EAAE,CAAC,IAAH,KAAY,UAAvC,EAAmD;AACjD,MAAA,IAAI,CAAC;AAAE,QAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACD;;AACD,IAAA,IAAI;AACL,GAPH,EAQG,KARH,CAQS,YAAK;AACV,IAAA,YAAY;;AACZ,QAAI,EAAE,CAAC,IAAH,KAAY,OAAZ,IAAuB,EAAE,CAAC,IAAH,KAAY,UAAvC,EAAmD;AACjD,MAAA,IAAI,CAAC;AAAE,QAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACD;AACF,GAbH;AAcD,CAxBD;AA0BA,eAAe,MAAf","sourcesContent":["import Vue from \"vue\";\nimport VueRouter, { RouteConfig } from \"vue-router\";\nimport Main from \"../views/Main.vue\";\nimport { getToken } from \"../helpers/token-getter\";\nimport { authenticateUser } from \"../helpers/user-getter\";\nimport store from \"../store\";\nimport { clearSession } from \"../helpers/clear-session\";\n\nVue.use(VueRouter);\n\nconst routes: Array<RouteConfig> = [\n  {\n    path: \"/\",\n    name: \"Main\",\n    component: Main,\n  },\n  {\n    path: \"/account\",\n    name: \"Account\",\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () =>\n      import(/* webpackChunkName: \"account\" */ \"../views/Account.vue\"),\n  },\n  {\n    path: \"/login\",\n    name: \"Login\",\n    component: () =>\n      import(/* webpackChunkName: \"login\" */ \"../views/Login.vue\"),\n  },\n  {\n    path: \"/register\",\n    name: \"Register\",\n    component: () =>\n      import(/* webpackChunkName: \"register\" */ \"../views/Register.vue\"),\n  },\n  {\n    path: \"*\",\n    redirect: { name: \"Main\" }\n  }\n];\n\nconst router = new VueRouter({\n  mode: \"hash\",\n  base: process.env.BASE_URL,\n  routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n  if (!getToken()) {\n    clearSession();\n    if (to.name !== \"Login\" && to.name !== \"Register\") {\n      next({ name: \"Login\" });\n    }\n    next();\n    return;\n  }\n\n  authenticateUser()\n    .then((user) => {\n      store.dispatch(\"setUser\", user);\n      if (to.name === \"Login\" || to.name === \"Register\") {\n        next({ name: \"Main\" });\n      }\n      next();\n    })\n    .catch(() => {\n      clearSession();\n      if (to.name !== \"Login\" && to.name !== \"Register\") {\n        next({ name: \"Login\" });\n      }\n    });\n});\n\nexport default router;\n"],"sourceRoot":""}]}